---
import Gallery from "../components/Gallery.astro";
import Slider from "../components/Slider.astro";

const { frontmatter } = Astro.props;
const background = frontmatter.background;
const backgroundImage = frontmatter.backgroundImage;
const backgroundColor = frontmatter.background;
const foregroundColor = frontmatter.foreground;
const panelHeight = frontmatter.panelHeight;
const indent = frontmatter.indent;
const gallery = frontmatter.gallery;
const slider = frontmatter.slider;
const panelLayout = frontmatter.panelLayout;
const uniqueid = frontmatter.url.split("__").pop();
---

<section class={panelLayout} data-section-name={uniqueid}>
  <div class="panelBackground">
    {background == "image" && <img src={backgroundImage} />}
    {
      background == "slider" && (
        <Slider slider={slider} background="background" />
      )
    }
    {
      background == "gallery" && (
        <Gallery gallery={gallery} background="background" />
      )
    }
  </div>
  <article>
    <slot />
  </article>
</section>

<style
  define:vars={{
    backgroundColor,
    foregroundColor,
    indent,
    panelHeight,
  }}
>
  section {
    position: relative;
    color: var(--foregroundColor);
    background: var(--backgroundColor);
    padding: var(--indent);
    gap: var(--column-gap);
    min-height: var(--panelHeight);
  }

  .panelBackground img {
    object-fit: cover;
    object-position: center;
  }

  .panelBackground {
    position: absolute;
    inset: 0;
    z-index: -1;
  }

  section.centered {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-size: cover;
  }

  section.two-column {
    columns: 2;
  }

  section.three-column {
    columns: 3;
  }

  section.four-column {
    columns: 4;
  }
</style>
