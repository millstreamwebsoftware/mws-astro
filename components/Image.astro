---
import { GalleryItem } from "../types";

export interface Props {
  image: GalleryItem;
}

const { image } = Astro.props;
const imageFit = image.imageFit || "cover";
var imageWidth = "100%";
var imageHeight = "100%";
var margin = image.margin || 0;
if (image.height) {
  imageHeight = image.height + "px";
}
if (image.width) {
  imageWidth = image.width + "px";
}
---

<figure>
  <a href={image.link}>
    <img
      src={image.image}
      alt={image.alt}
      width={image.width}
      height={image.height}
    />
    {
      (image.title || image.description) && (
        <figcaption>
          <h3>{image.title}</h3>
          <p>{image.description}</p>
        </figcaption>
      )
    }
  </a>
</figure>

<style lang="scss" define:vars={{ imageFit, imageHeight, imageWidth, margin }}>
  img {
    object-fit: var(--imageFit);
    height: var(--imageHeight);
    width: var(--imageWidth);
  }

  figure {
    display: block;
    position: relative;
    height: var(--imageHeight);
    width: var(--imageWidth);
    margin: var(--margin);
  }

  img,
  a {
    position: absolute;
    inset: 0;
  }
</style>
